{% extends 'news/default.html' %}
{% load auth_extras %}

{% block content %}
<div class="subscriptions-container" style="max-width: 800px; margin: 0 auto;">
    <h2 style="color: #333; margin-bottom: 30px;">Мои подписки</h2>

    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}" style="padding: 15px; margin-bottom: 20px; border-radius: 5px; background-color: {% if message.tags == 'success' %}#d4edda{% else %}#f8d7da{% endif %}; color: {% if message.tags == 'success' %}#155724{% else %}#721c24{% endif %};">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if subscriptions %}
    <div class="subscriptions-list">
        {% for subscription in subscriptions %}
        <div class="subscription-item" style="background-color: white; padding: 20px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="margin-top: 0; margin-bottom: 5px;">
                    {{ subscription.category.name }}
                </h3>
                <p style="color: #666; margin: 0; font-size: 14px;">
                    Подписаны с {{ subscription.subscribed_at|date:"d.m.Y" }}
                </p>
            </div>

            <div class="subscription-actions">
                <a href="{% url 'unsubscribe' subscription.category.id %}"
                   class="btn btn-danger"
                   style="padding: 8px 15px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 5px; font-size: 14px;">
                    Отписаться
                </a>
                <a href="{{ subscription.category.get_absolute_url }}"
                   class="btn btn-primary"
                   style="padding: 8px 15px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; margin-left: 10px; font-size: 14px;">
                    Новости категории
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info" style="padding: 30px; text-align: center; background-color: #e7f3ff; border-radius: 8px;">
        <h3 style="margin-top: 0;">У вас нет подписок</h3>
        <p>Подпишитесь на интересующие категории, чтобы получать уведомления о новых статьях!</p>
        <a href="{% url 'news_list' %}" class="btn btn-primary" style="padding: 10px 25px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; margin-top: 15px;">
            Перейти к новостям
        </a>
    </div>
    {% endif %}

    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
        <h3>Как работают подписки?</h3>
        <ul style="line-height: 1.8;">
            <li>Вы получаете email-уведомления о новых статьях в выбранных категориях</li>
            <li>Уведомления приходят сразу после публикации статьи</li>
            <li>В письме содержится заголовок и начало статьи</li>
            <li>Вы можете отписаться в любой момент</li>
        </ul>
    </div>
</div>
{% endblock %}